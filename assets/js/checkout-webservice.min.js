!function(a){"use strict";a(function(){function b(b){var c=[],d=null;switch(d=a(".cielo-debit").attr("data-debit")){case"all":c=["visa","mastercard"];break;case"visa":c=["visa"];break;case"mastercard":c=["mastercard"]}-1===a.inArray(b,c)?(a(".cielo-debit").hide(),a(".cielo-debit").removeAttr("selected").find("option:first").attr("selected","selected")):a(".cielo-debit").show()}function c(b){if(d)return d=!1,!0;if(!a("#payment_method_cielo").is(":checked"))return!0;var c=a(b),e=a("#cielo-card-number",c).val(),f=a.payment.cardType(e);return"dinersclub"===f&&(f="diners"),"visaelectron"===f&&(f="visa"),"maestro"===f&&(f="mastercard"),-1!==a.inArray(f,wc_cielo_checkout_webservice_params.available_brands)&&(a(".cielo-card-brand",c).remove(),c.append(a('<input class="cielo-card-brand" name="cielo_card" type="hidden" />').val(f)),d=!0,c.submit()),!0}var d=!1;if(a.payment.cards){var e=[];a.each(a.payment.cards,function(a,b){e.push(b.type)}),-1===a.inArray("elo",e)&&a.payment.cards.push({type:"elo",pattern:/^(636[2-3])/,format:/(\d{1,4})/g,length:[16],cvcLength:[3],luhn:!0}),-1===a.inArray("aura",e)&&a.payment.cards.unshift({type:"aura",pattern:/^5078/,format:/(\d{1,6})(\d{1,2})?(\d{1,11})?/,length:[19],cvcLength:[3],luhn:!0})}a("form.checkout").on("checkout_place_order_cielo",function(){return c(this)}),a("form#order_review").submit(function(){return c(this)}),a("body").on("checkout_error",function(){a(".cielo-card-brand").remove()}),a("body").on("click",'input[id^="payment_method_cielo"]',function(){b(a('body #cielo-card-brand input[data-id="'+a(this).val()+'"]').first().val())}),a("form.checkout, form#order_review").on("change","#cielo-payment-form input",function(){a(".cielo-card-brand").remove()}),a("form.checkout, form#order_review").on("payment.cardType","#cielo-payment-form input#cielo-card-number",function(c){var d=a.payment.cardType(c.target.value)||"unknown";b(d)})})}(jQuery);